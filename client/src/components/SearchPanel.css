.sp-overlay {
  position:        fixed;
  inset:           0;
  z-index:         300;
  background:      rgba(5, 3, 14, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  display:         flex;
  flex-direction:  column;
  align-items:     center;
  padding-top:     80px;
  animation:       sp-fade 0.2s ease forwards;
}

@keyframes sp-fade { from { opacity: 0; } to { opacity: 1; } }

.sp-panel {
  width:           100%;
  max-width:       620px;
  max-height:      calc(100vh - 120px);
  display:         flex;
  flex-direction:  column;
  background:      rgba(12, 8, 28, 0.98);
  border:          1px solid rgba(255,255,255,0.1);
  border-radius:   18px;
  box-shadow:      0 40px 80px rgba(0,0,0,0.8), 0 0 0 1px rgba(255,255,255,0.04) inset;
  overflow:        hidden;
  animation:       sp-in 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes sp-in {
  from { opacity: 0; transform: translateY(-16px) scale(0.97); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* Header */
.sp-header {
  display:       flex;
  align-items:   center;
  gap:           12px;
  padding:       16px 20px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
  flex-shrink:   0;
}

.sp-input-wrap {
  flex:          1;
  display:       flex;
  align-items:   center;
  gap:           10px;
  padding:       10px 14px;
  background:    rgba(255,255,255,0.05);
  border:        1px solid rgba(255,255,255,0.09);
  border-radius: 10px;
  transition:    border-color 0.2s, background 0.2s;
}
.sp-input-wrap:focus-within {
  border-color: rgba(168,85,247,0.5);
  background:   rgba(168,85,247,0.06);
}

.sp-input-icon { color: rgba(255,255,255,0.35); flex-shrink: 0; }

.sp-input {
  flex:       1;
  background: none;
  border:     none;
  outline:    none;
  color:      #fff;
  font-size:  1rem;
  font-weight:400;
}
.sp-input::placeholder { color: rgba(255,255,255,0.3); }

.sp-spinner {
  width:         15px; height: 15px;
  border-radius: 50%;
  border:        2px solid rgba(168,85,247,0.2);
  border-top-color: #a855f7;
  animation:     spin 0.7s linear infinite;
  flex-shrink:   0;
}

.sp-clear {
  background:  none; border: none;
  color:       rgba(255,255,255,0.35);
  cursor:      pointer;
  font-size:   0.8rem;
  padding:     0 2px;
  flex-shrink: 0;
  transition:  color 0.15s;
}
.sp-clear:hover { color: #fff; }

.sp-cancel {
  background:    none; border: none;
  color:         rgba(255,255,255,0.45);
  font-size:     0.875rem;
  font-weight:   500;
  cursor:        pointer;
  padding:       6px 10px;
  border-radius: 8px;
  flex-shrink:   0;
  transition:    color 0.15s, background 0.15s;
}
.sp-cancel:hover { color: #fff; background: rgba(255,255,255,0.06); }

/* Results */
.sp-results { overflow-y: auto; flex: 1; padding: 8px 0; }
.sp-results::-webkit-scrollbar { width: 4px; }
.sp-results::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }

/* Empty */
.sp-empty {
  display:        flex;
  flex-direction: column;
  align-items:    center;
  gap:            12px;
  padding:        48px 24px;
  text-align:     center;
  color:          rgba(255,255,255,0.35);
  font-size:      0.9rem;
}
.sp-empty-icon { font-size: 2.4rem; }

/* Track row */
.sp-track {
  display:     flex;
  align-items: center;
  gap:         12px;
  padding:     10px 20px;
  transition:  background 0.15s;
}
.sp-track:hover { background: rgba(255,255,255,0.04); }
.sp-track:hover .sp-track__actions { opacity: 1; }

.sp-track__art {
  width:         44px; height: 44px;
  border-radius: 6px;
  object-fit:    cover;
  flex-shrink:   0;
  background:    rgba(255,255,255,0.06);
}

.sp-track__info { flex: 1; min-width: 0; }
.sp-track__name { font-size: 0.875rem; font-weight: 600; color: #fff; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sp-track__meta { font-size: 0.72rem; color: rgba(255,255,255,0.4); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 2px; }
.sp-track__dot  { margin: 0 4px; }

.sp-track__dur {
  font-size:   0.72rem;
  color:       rgba(255,255,255,0.3);
  flex-shrink: 0;
  font-variant-numeric: tabular-nums;
}

.sp-track__actions {
  display:  flex;
  gap:      8px;
  flex-shrink: 0;
  opacity:  0;
  transition: opacity 0.15s;
}
.sp-track:hover .sp-track__actions { opacity: 1; }

.sp-btn {
  display:         inline-flex;
  align-items:     center;
  gap:             5px;
  border-radius:   8px;
  cursor:          pointer;
  font-size:       0.78rem;
  font-weight:     600;
  transition:      transform 0.12s, background 0.15s, box-shadow 0.15s;
}
.sp-btn:active { transform: scale(0.94); }

.sp-btn--queue {
  width:           32px; height: 32px;
  justify-content: center;
  background:      rgba(255,255,255,0.06);
  border:          1px solid rgba(255,255,255,0.1);
  color:           rgba(255,255,255,0.6);
}
.sp-btn--queue:hover  { background: rgba(255,255,255,0.12); color: #fff; }
.sp-btn--queued       { color: #4ade80 !important; border-color: rgba(74,222,128,0.3) !important; }

.sp-btn--play {
  padding:    7px 14px;
  background: linear-gradient(135deg, #ff6eb4, #a855f7);
  border:     none;
  color:      #fff;
  box-shadow: 0 4px 14px rgba(168,85,247,0.35);
}
.sp-btn--play:hover { box-shadow: 0 6px 20px rgba(168,85,247,0.55); transform: translateY(-1px); }

@media (max-width: 660px) {
  .sp-overlay { padding-top: 16px; align-items: stretch; }
  .sp-panel   { border-radius: 18px 18px 0 0; max-height: 88vh; }
  .sp-track__dur { display: none; }
}