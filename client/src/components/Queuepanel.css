/* ============================================================
   QUEUE PANEL — Up Next sidebar panel
   ============================================================ */

.queue-panel {
  position:        fixed;
  top:             72px;
  right:           0;
  bottom:          72px;
  width:           min(360px, 90vw);
  z-index:         var(--z-overlay);
  display:         flex;
  flex-direction:  column;
  background:      rgba(8, 5, 20, 0.96);
  backdrop-filter: blur(40px);
  -webkit-backdrop-filter: blur(40px);
  border-left:     1px solid rgba(255, 255, 255, 0.08);
  box-shadow:      -20px 0 60px rgba(0, 0, 0, 0.5);
  animation:       slide-in-right 0.3s var(--ease-out) forwards;
  overflow:        hidden;
}

@keyframes slide-in-right {
  from { transform: translateX(100%); opacity: 0; }
  to   { transform: translateX(0);    opacity: 1; }
}


/* ── Header ──────────────────────────────────────────────── */

.queue-panel__header {
  display:         flex;
  align-items:     center;
  justify-content: space-between;
  padding:         var(--space-lg);
  border-bottom:   1px solid rgba(255, 255, 255, 0.07);
  flex-shrink:     0;
}

.queue-panel__title {
  font-family:   var(--font-display);
  font-size:     1.1rem;
  font-weight:   700;
  color:         var(--text-primary);
  letter-spacing:-0.01em;
}

.queue-panel__header-actions {
  display:     flex;
  align-items: center;
  gap:         6px;
}

.queue-panel__refresh {
  width:           30px;
  height:          30px;
  border-radius:   var(--r-sm);
  background:      rgba(255,255,255,0.04);
  border:          1px solid rgba(255,255,255,0.07);
  color:           var(--text-muted);
  display:         flex;
  align-items:     center;
  justify-content: center;
  cursor:          pointer;
  transition:      color var(--duration-fast) ease, background var(--duration-fast) ease, transform var(--duration-fast) ease;
}
.queue-panel__refresh:hover               { color: var(--text-primary); background: rgba(255,255,255,0.08); }
.queue-panel__refresh--spinning svg       { animation: spin 0.8s linear infinite; }

.queue-panel__close {
  width:           30px;
  height:          30px;
  border-radius:   var(--r-sm);
  background:      rgba(255,255,255,0.04);
  border:          1px solid rgba(255,255,255,0.07);
  color:           var(--text-muted);
  display:         flex;
  align-items:     center;
  justify-content: center;
  cursor:          pointer;
  font-size:       0.8rem;
  transition:      color var(--duration-fast) ease, background var(--duration-fast) ease;
}
.queue-panel__close:hover { color: var(--text-primary); background: rgba(255,255,255,0.08); }


/* ── Section labels ──────────────────────────────────────── */

.queue-panel__section-label {
  font-size:     0.65rem;
  font-weight:   600;
  color:         var(--text-muted);
  letter-spacing:0.08em;
  text-transform:uppercase;
  margin-bottom: var(--space-sm);
  padding:       0 var(--space-lg);
}


/* ── Now Playing section ─────────────────────────────────── */

.queue-panel__now {
  padding:       var(--space-md) 0 var(--space-sm);
  border-bottom: 1px solid rgba(255,255,255,0.05);
  flex-shrink:   0;
}


/* ── Queue List ──────────────────────────────────────────── */

.queue-panel__list {
  flex:       1;
  overflow-y: auto;
  padding:    var(--space-md) 0;
}

.queue-panel__list::-webkit-scrollbar { width: 4px; }
.queue-panel__list::-webkit-scrollbar-track { background: transparent; }
.queue-panel__list::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }

.queue-panel__loading { display: flex; flex-direction: column; gap: 2px; }

.queue-panel__empty {
  padding:    var(--space-2xl) var(--space-xl);
  text-align: center;
  font-size:  0.875rem;
  color:      var(--text-muted);
}
.queue-panel__empty-sub { font-size: 0.75rem; margin-top: 4px; opacity: 0.7; }


/* ── Track Row ───────────────────────────────────────────── */

.queue-track {
  display:     flex;
  align-items: center;
  gap:         10px;
  padding:     8px var(--space-lg);
  position:    relative;
  transition:  background var(--duration-fast) ease;
  cursor:      default;
}
.queue-track:hover { background: rgba(255,255,255,0.04); }
.queue-track:hover .queue-track__play-btn { opacity: 1; }
.queue-track:hover .queue-track__num      { opacity: 0; }

/* Current track highlight */
.queue-track--current {
  background: rgba(168, 85, 247, 0.07);
  cursor:     default;
}
.queue-track--current:hover { background: rgba(168, 85, 247, 0.1); }

/* Skeleton */
.queue-track--skeleton {
  height:        56px;
  background:    rgba(255,255,255,0.03);
  border-radius: var(--r-sm);
  margin:        0 var(--space-lg);
  animation:     pulse 1.8s ease-in-out infinite;
  cursor:        default;
}
.queue-track--skeleton:hover { background: rgba(255,255,255,0.03); }

/* Playing bars animation */
.queue-track__playing-bars {
  display:         flex;
  align-items:     flex-end;
  gap:             2px;
  width:           14px;
  height:          14px;
  flex-shrink:     0;
}
.queue-track__playing-bars span {
  flex:          1;
  border-radius: 1px;
  background:    var(--grad-pink);
  animation:     bar-wave 0.8s ease-in-out infinite alternate;
}
.queue-track__playing-bars span:nth-child(1) { height: 60%; animation-delay: 0s; }
.queue-track__playing-bars span:nth-child(2) { height: 100%; animation-delay: 0.15s; }
.queue-track__playing-bars span:nth-child(3) { height: 40%; animation-delay: 0.3s; }

.queue-track__num {
  width:       16px;
  text-align:  center;
  font-family: var(--font-mono);
  font-size:   0.75rem;
  color:       var(--text-muted);
  flex-shrink: 0;
  transition:  opacity var(--duration-fast) ease;
}

.queue-track__art {
  width:         40px;
  height:        40px;
  border-radius: var(--r-xs);
  object-fit:    cover;
  flex-shrink:   0;
  background:    rgba(255,255,255,0.05);
}

.queue-track__info {
  flex:      1;
  min-width: 0;
}
.queue-track__name {
  font-size:     0.875rem;
  font-weight:   600;
  color:         var(--text-primary);
  white-space:   nowrap;
  overflow:      hidden;
  text-overflow: ellipsis;
  line-height:   1.3;
}
.queue-track__artist {
  font-size:     0.72rem;
  color:         var(--text-muted);
  white-space:   nowrap;
  overflow:      hidden;
  text-overflow: ellipsis;
  margin-top:    1px;
}

.queue-track__duration {
  font-family: var(--font-mono);
  font-size:   0.7rem;
  color:       var(--text-muted);
  flex-shrink: 0;
}

.queue-track__badge {
  font-size:     0.65rem;
  font-weight:   600;
  color:         var(--grad-pink);
  background:    rgba(255,110,180,0.1);
  border:        1px solid rgba(255,110,180,0.2);
  border-radius: var(--r-full);
  padding:       2px 8px;
  flex-shrink:   0;
  letter-spacing:0.04em;
  text-transform:uppercase;
}

.queue-track__play-btn {
  width:           28px;
  height:          28px;
  border-radius:   50%;
  background:      var(--gradient-accent);
  border:          none;
  color:           #fff;
  display:         flex;
  align-items:     center;
  justify-content: center;
  cursor:          pointer;
  flex-shrink:     0;
  opacity:         0;
  transition:      opacity var(--duration-fast) ease, transform var(--duration-fast) var(--ease-out);
}
.queue-track__play-btn:hover  { transform: scale(1.1); }
.queue-track__play-btn:active { transform: scale(0.9); }


/* ── Mobile ──────────────────────────────────────────────── */

@media (max-width: 768px) {
  .queue-panel {
    top:    auto;
    bottom: 72px;
    left:   0;
    right:  0;
    width:  100%;
    height: 60vh;
    border-left:   none;
    border-top:    1px solid rgba(255,255,255,0.08);
    border-radius: var(--r-xl) var(--r-xl) 0 0;
    animation:     slide-in-bottom 0.3s var(--ease-out) forwards;
  }
  @keyframes slide-in-bottom {
    from { transform: translateY(100%); opacity: 0; }
    to   { transform: translateY(0);    opacity: 1; }
  }
}