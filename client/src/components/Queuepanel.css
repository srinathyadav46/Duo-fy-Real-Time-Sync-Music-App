.qp {
  position:        fixed;
  top:             72px;
  right:           0;
  bottom:          72px;
  width:           min(360px, 92vw);
  z-index:         150;
  display:         flex;
  flex-direction:  column;
  background:      rgba(8, 5, 20, 0.97);
  backdrop-filter: blur(40px);
  -webkit-backdrop-filter: blur(40px);
  border-left:     1px solid rgba(255,255,255,0.07);
  box-shadow:      -24px 0 60px rgba(0,0,0,0.6);
  animation:       qp-in 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes qp-in {
  from { transform: translateX(100%); opacity: 0; }
  to   { transform: translateX(0);    opacity: 1; }
}

.qp__header {
  display:         flex;
  align-items:     center;
  justify-content: space-between;
  padding:         18px 20px;
  border-bottom:   1px solid rgba(255,255,255,0.06);
  flex-shrink:     0;
}

.qp__title {
  font-size:     1.05rem;
  font-weight:   700;
  color:         #fff;
  letter-spacing:-0.01em;
}

.qp__header-right { display: flex; gap: 6px; }

.qp__icon-btn {
  width:           30px; height: 30px;
  border-radius:   8px;
  background:      rgba(255,255,255,0.05);
  border:          1px solid rgba(255,255,255,0.08);
  color:           rgba(255,255,255,0.45);
  display:         flex;
  align-items:     center;
  justify-content: center;
  cursor:          pointer;
  font-size:       0.8rem;
  transition:      background 0.15s, color 0.15s;
}
.qp__icon-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }

.qp__body { overflow-y: auto; flex: 1; }
.qp__body::-webkit-scrollbar { width: 4px; }
.qp__body::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }

.qp__section { padding: 14px 0 0; }

.qp__section-label {
  font-size:     0.64rem;
  font-weight:   700;
  color:         rgba(255,255,255,0.3);
  letter-spacing:0.09em;
  text-transform:uppercase;
  padding:       0 20px 8px;
}

/* Track rows */
.qp__track {
  display:     flex;
  align-items: center;
  gap:         10px;
  padding:     8px 20px;
  transition:  background 0.15s;
  position:    relative;
}
.qp__track:hover { background: rgba(255,255,255,0.04); }
.qp__track:hover .qp__play { opacity: 1; }
.qp__track:hover .qp__num  { opacity: 0; }

.qp__track--current { background: rgba(168,85,247,0.07); }
.qp__track--current:hover { background: rgba(168,85,247,0.11); }

.qp__bars {
  display:     flex;
  align-items: flex-end;
  gap:         2px;
  width:       14px;
  height:      14px;
  flex-shrink: 0;
}
.qp__bars span {
  flex:          1;
  background:    #ff6eb4;
  border-radius: 1px;
  animation:     bar-wave 0.8s ease-in-out infinite alternate;
}
.qp__bars span:nth-child(1) { height: 55%; animation-delay: 0s; }
.qp__bars span:nth-child(2) { height: 100%; animation-delay: 0.15s; }
.qp__bars span:nth-child(3) { height: 38%; animation-delay: 0.3s; }

@keyframes bar-wave { 0% { transform: scaleY(0.4); } 100% { transform: scaleY(1); } }

.qp__num {
  width:       16px;
  text-align:  center;
  font-size:   0.72rem;
  color:       rgba(255,255,255,0.3);
  flex-shrink: 0;
  transition:  opacity 0.15s;
  font-variant-numeric: tabular-nums;
}

.qp__art {
  width:         40px; height: 40px;
  border-radius: 5px;
  object-fit:    cover;
  flex-shrink:   0;
  background:    rgba(255,255,255,0.05);
}

.qp__info  { flex: 1; min-width: 0; }
.qp__name  { font-size: 0.85rem; font-weight: 600; color: #fff; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.qp__artist{ font-size: 0.7rem; color: rgba(255,255,255,0.4); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 1px; }

.qp__dur {
  font-size:   0.68rem;
  color:       rgba(255,255,255,0.3);
  flex-shrink: 0;
  font-variant-numeric: tabular-nums;
}

.qp__badge {
  font-size:     0.62rem;
  font-weight:   700;
  letter-spacing:0.05em;
  text-transform:uppercase;
  color:         #ff6eb4;
  background:    rgba(255,110,180,0.1);
  border:        1px solid rgba(255,110,180,0.2);
  border-radius: 20px;
  padding:       2px 8px;
  flex-shrink:   0;
}

.qp__play {
  width:           28px; height: 28px;
  border-radius:   50%;
  background:      linear-gradient(135deg, #ff6eb4, #a855f7);
  border:          none;
  color:           #fff;
  display:         flex;
  align-items:     center;
  justify-content: center;
  cursor:          pointer;
  flex-shrink:     0;
  opacity:         0;
  transition:      opacity 0.15s, transform 0.12s;
}
.qp__play:hover  { transform: scale(1.1); }
.qp__play:active { transform: scale(0.92); }

.qp__skeleton {
  height:        56px;
  background:    rgba(255,255,255,0.03);
  border-radius: 8px;
  margin:        4px 20px;
  animation:     pulse 1.8s ease-in-out infinite;
}
@keyframes pulse { 0%,100% { opacity: 0.5; } 50% { opacity: 1; } }

.qp__empty {
  padding:    40px 24px;
  text-align: center;
  font-size:  0.875rem;
  color:      rgba(255,255,255,0.3);
}
.qp__empty-sub { font-size: 0.75rem; margin-top: 4px; opacity: 0.7; }

/* Mobile â€” bottom sheet */
@media (max-width: 768px) {
  .qp {
    top:         auto;
    bottom:      72px;
    left:        0; right: 0;
    width:       100%;
    height:      60vh;
    border-left: none;
    border-top:  1px solid rgba(255,255,255,0.07);
    border-radius: 18px 18px 0 0;
    animation:   qp-up 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }
  @keyframes qp-up { from { transform: translateY(100%); } to { transform: translateY(0); } }
}