/* ============================================================
   ROOM — Cinematic Dark Design System
   Committed aesthetic: deep space, neon accents, filmic weight
   ============================================================ */

/* ── Design tokens ─────────────────────────────────────────── */
:root {
  --pink:    #ff6eb4;
  --purple:  #a855f7;
  --cyan:    #22d3ee;
  --bg:      #05030d;
  --bg-card: rgba(10, 6, 24, 0.82);
  --border:  rgba(255,255,255,0.07);
  --text:    #fff;
  --text-2:  rgba(255,255,255,0.6);
  --text-3:  rgba(255,255,255,0.3);
  --grad:    linear-gradient(135deg, var(--pink), var(--purple), #3b82f6);
  --grad-sm: linear-gradient(135deg, var(--pink), var(--purple));
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ── Shell ─────────────────────────────────────────────────── */
.room {
  display:        flex;
  min-height:     100vh;
  padding-top:    72px;
  padding-bottom: 72px;
  background:     var(--bg);
  color:          var(--text);
  position:       relative;
  overflow:       hidden;
}

/* ── Background orbs ────────────────────────────────────────── */
.room__orb {
  position:       fixed;
  border-radius:  50%;
  pointer-events: none;
  z-index:        0;
}
.room__orb--a {
  top: -20%; right: -8%;
  width: 700px; height: 700px;
  background: radial-gradient(ellipse, rgba(168,85,247,0.13) 0%, transparent 65%);
  animation: orb-a 18s ease-in-out infinite alternate;
}
.room__orb--b {
  bottom: -5%; left: 10%;
  width: 550px; height: 420px;
  background: radial-gradient(ellipse, rgba(34,211,238,0.07) 0%, transparent 60%);
  animation: orb-b 14s ease-in-out infinite alternate-reverse;
}
.room__orb--c {
  top: 50%; left: 50%;
  transform: translate(-50%,-50%);
  width: 900px; height: 900px;
  background: radial-gradient(ellipse, rgba(168,85,247,0.22) 0%, rgba(255,110,180,0.12) 40%, transparent 65%);
  animation: orb-c 3s ease-out forwards;
  pointer-events: none;
}

@keyframes orb-a { 0% { transform: translate(0,0) scale(1); } 100% { transform: translate(-40px, 40px) scale(1.08); } }
@keyframes orb-b { 0% { transform: translate(0,0) scale(1); } 100% { transform: translate(30px, -30px) scale(1.05); } }
@keyframes orb-c { 0% { opacity:0; transform: translate(-50%,-50%) scale(0.4); } 30% { opacity:1; transform: translate(-50%,-50%) scale(1); } 100% { opacity:0; transform: translate(-50%,-50%) scale(1.4); } }

.room--celebrating { animation: shell-flash 3s ease-out forwards; }
@keyframes shell-flash { 0%,100% { filter: brightness(1); } 18% { filter: brightness(1.1); } }

/* ── Album art blur bg (mobile) ─────────────────────────────── */
.room__bg-art {
  position:            fixed;
  inset:               0;
  z-index:             0;
  background-size:     cover;
  background-position: center;
  filter:              blur(90px) brightness(0.15) saturate(1.6);
  pointer-events:      none;
  opacity:             0;
  transition:          opacity 1s ease;
}
@media (max-width: 768px) { .room__bg-art { opacity: 1; } }

/* ── Floating reactions ──────────────────────────────────────── */
.room__reactions-stage {
  position:       fixed;
  bottom:         90px;
  right:          24px;
  z-index:        200;
  pointer-events: none;
  display:        flex;
  flex-direction: column-reverse;
  gap:            8px;
  align-items:    flex-end;
}
.room__reaction         { font-size: 2rem; animation: react-up 2.8s ease-out forwards; display: block; }
.room__reaction--partner { animation-name: react-partner; }

@keyframes react-up {
  0%   { opacity:0; transform: translateY(0) scale(0.3); }
  15%  { opacity:1; transform: translateY(-8px) scale(1.25); }
  80%  { opacity:1; transform: translateY(-80px) scale(1); }
  100% { opacity:0; transform: translateY(-110px) scale(0.85); }
}
@keyframes react-partner {
  0%   { opacity:0; transform: translateX(-16px) scale(0.3); }
  15%  { opacity:1; transform: translateX(0) scale(1.2); }
  80%  { opacity:1; transform: translateY(-60px) scale(1); }
  100% { opacity:0; transform: translateY(-90px) scale(0.85); }
}

/* ── Toast ───────────────────────────────────────────────────── */
.room__toast {
  position:        fixed;
  top:             calc(72px + 14px);
  left:            50%;
  transform:       translateX(-50%);
  z-index:         250;
  display:         inline-flex;
  align-items:     center;
  gap:             8px;
  padding:         9px 18px;
  border-radius:   100px;
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  font-size:       0.82rem;
  font-weight:     600;
  white-space:     nowrap;
  animation:       toast-in 0.3s var(--ease-spring) forwards;
  box-shadow:      0 8px 32px rgba(0,0,0,0.5);
}
@keyframes toast-in {
  from { opacity:0; transform: translateX(-50%) translateY(-8px) scale(0.95); }
  to   { opacity:1; transform: translateX(-50%) translateY(0) scale(1); }
}

.room__toast--info,
.room__toast--play  { background: rgba(168,85,247,0.18); border: 1px solid rgba(168,85,247,0.35); color: #d4a8ff; }
.room__toast--pause { background: rgba(255,255,255,0.07); border: 1px solid rgba(255,255,255,0.12); color: var(--text-2); }
.room__toast--sync  { background: rgba(255,110,180,0.18); border: 1px solid rgba(255,110,180,0.4); color: #ffb3d9; }
.room__toast--join  { background: rgba(34,197,94,0.1);   border: 1px solid rgba(34,197,94,0.3);  color: #86efac; }
.room__toast--leave { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); color: var(--text-3); }

.room__toast-dot { width:6px; height:6px; border-radius:50%; background:currentColor; animation: pulse-dot 1s ease-in-out infinite; flex-shrink:0; }
@keyframes pulse-dot { 0%,100% { opacity:1; } 50% { opacity:0.4; } }

/* ── Celebration ─────────────────────────────────────────────── */
.room__celebrate {
  position:        fixed;
  inset:           0;
  z-index:         190;
  display:         flex;
  align-items:     center;
  justify-content: center;
  pointer-events:  none;
}
.room__celebrate-ring {
  position:      absolute;
  border-radius: 50%;
  border:        2px solid rgba(168,85,247,0.5);
  animation:     ring-out 3s ease-out forwards;
}
.room__celebrate-ring--1 { width:80px;   height:80px;   animation-delay:0s;   }
.room__celebrate-ring--2 { width:180px;  height:180px;  animation-delay:0.15s;}
.room__celebrate-ring--3 { width:300px;  height:300px;  animation-delay:0.3s; }
@keyframes ring-out { 0% { transform:scale(0.8); opacity:0.9; } 100% { transform:scale(3); opacity:0; } }

.room__celebrate-text {
  position:              relative;
  font-size:             2rem;
  font-weight:           800;
  letter-spacing:        -0.03em;
  background:            var(--grad);
  -webkit-background-clip: text;
  background-clip:       text;
  -webkit-text-fill-color: transparent;
  animation:             celeb-txt 3s ease-out forwards;
}
@keyframes celeb-txt {
  0%   { opacity:0; transform:translateY(12px) scale(0.9); }
  20%  { opacity:1; transform:translateY(0) scale(1.05); }
  75%  { opacity:1; transform:translateY(-6px) scale(1); }
  100% { opacity:0; transform:translateY(-20px) scale(0.95); }
}

/* ════════════════════════════════════════════════════════════════
   SIDEBAR
════════════════════════════════════════════════════════════════ */
.sidebar {
  width:            236px;
  flex-shrink:      0;
  display:          flex;
  flex-direction:   column;
  justify-content:  space-between;
  padding:          20px 16px;
  border-right:     1px solid var(--border);
  background:       rgba(5,3,13,0.55);
  backdrop-filter:  blur(24px);
  -webkit-backdrop-filter: blur(24px);
  z-index:          1;
  position:         relative;
}

.sidebar__top    { display:flex; flex-direction:column; gap:20px; }
.sidebar__bottom { display:flex; flex-direction:column; gap:10px; padding-top:16px; border-top:1px solid var(--border); }

/* Brand */
.sidebar__brand { display:flex; align-items:center; gap:9px; text-decoration:none; }
.sidebar__logo  { width:30px; height:30px; object-fit:contain; filter:drop-shadow(0 0 7px rgba(168,85,247,0.55)); flex-shrink:0; }
.sidebar__brand-name {
  font-weight: 800;
  font-size:   1.05rem;
  letter-spacing: -0.02em;
  background:  linear-gradient(to right, #fff 20%, var(--purple));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Search CTA */
.sidebar__search-cta {
  display:       flex;
  align-items:   center;
  gap:           9px;
  padding:       9px 12px;
  border-radius: 10px;
  background:    rgba(255,255,255,0.04);
  border:        1px solid rgba(255,255,255,0.07);
  color:         var(--text-3);
  font-size:     0.82rem;
  font-weight:   500;
  cursor:        pointer;
  width:         100%;
  text-align:    left;
  transition:    background 0.15s, border-color 0.15s, color 0.15s;
}
.sidebar__search-cta:hover { background:rgba(168,85,247,0.08); border-color:rgba(168,85,247,0.28); color:var(--text-2); }

/* Sections */
.sidebar__section { display:flex; flex-direction:column; gap:6px; }
.sidebar__label   { font-size:0.62rem; font-weight:700; color:var(--text-3); letter-spacing:0.1em; text-transform:uppercase; }

.sidebar__code-row { display:flex; align-items:center; gap:8px; }
.sidebar__code {
  font-size:     0.88rem;
  font-weight:   700;
  color:         var(--text);
  letter-spacing:0.18em;
  background:    rgba(168,85,247,0.09);
  border:        1px solid rgba(168,85,247,0.22);
  border-radius: 7px;
  padding:       4px 10px;
  font-family:   ui-monospace, 'Cascadia Code', monospace;
}
.sidebar__icon-btn {
  width:26px; height:26px;
  border-radius:7px;
  background:transparent;
  border:1px solid var(--border);
  color:var(--text-3);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
  transition:color 0.15s, background 0.15s, border-color 0.15s;
}
.sidebar__icon-btn:hover { color:var(--text); background:rgba(168,85,247,0.1); border-color:rgba(168,85,247,0.3); }

/* Partner */
.sidebar__partner { display:flex; align-items:center; gap:10px; }
.sidebar__avatar {
  width:38px; height:38px;
  border-radius:50%;
  background:rgba(255,255,255,0.06);
  border:2px solid rgba(255,255,255,0.1);
  display:flex; align-items:center; justify-content:center;
  font-size:0.9rem; font-weight:700;
  flex-shrink:0;
  position:relative; overflow:visible;
  transition:border-color 0.3s;
}
.sidebar__avatar img { width:100%; height:100%; border-radius:50%; object-fit:cover; }
.sidebar__avatar--on { border-color:rgba(34,197,94,0.5); }
.sidebar__avatar-dot {
  position:absolute; bottom:0; right:0;
  width:9px; height:9px;
  border-radius:50%; background:var(--text-3);
  border:2px solid var(--bg);
}
.sidebar__avatar-dot--on { background:rgba(34,197,94,0.9); box-shadow:0 0 7px rgba(34,197,94,0.6); animation:dot-pulse 2.2s ease-in-out infinite; }
@keyframes dot-pulse { 0%,100% { opacity:1; transform:scale(1); } 50% { opacity:0.7; transform:scale(1.2); } }

.sidebar__partner-text {}
.sidebar__partner-name   { font-size:0.85rem; font-weight:600; color:var(--text); line-height:1.2; }
.sidebar__partner-status { font-size:0.68rem; color:var(--text-3); margin-top:1px; }
.sidebar__partner-status { font-size:0.68rem; color:var(--text-3); }

/* Device */
.sidebar__device { display:flex; align-items:center; gap:8px; }
.sidebar__device-dot { width:7px; height:7px; border-radius:50%; background:var(--text-3); flex-shrink:0; }
.sidebar__device-dot--on { background:rgba(34,197,94,0.9); box-shadow:0 0 6px rgba(34,197,94,0.5); animation:dot-pulse 3s ease-in-out infinite; }
.sidebar__device-text { font-size:0.74rem; color:var(--text-3); }

/* Timer */
.sidebar__timer {
  font-size:   1.05rem;
  font-weight: 800;
  letter-spacing: -0.01em;
  background:  var(--grad-sm);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  font-family: ui-monospace, monospace;
}

/* Connection */
.sidebar__conn { display:flex; align-items:center; gap:7px; font-size:0.74rem; color:var(--text-3); }
.sidebar__conn-dot { width:7px; height:7px; border-radius:50%; background:var(--text-3); flex-shrink:0; }
.sidebar__conn-dot--live { background:rgba(34,197,94,0.9); box-shadow:0 0 6px rgba(34,197,94,0.5); animation:dot-pulse 2.5s ease-in-out infinite; }
.sidebar__conn-label { flex:1; font-weight:500; }
.sidebar__latency { font-family:ui-monospace,monospace; font-size:0.64rem; color:rgba(34,197,94,0.7); margin-left:auto; }

/* Leave */
.sidebar__leave {
  display:flex; align-items:center; gap:7px;
  padding:9px 12px;
  border-radius:10px;
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.06);
  color:var(--text-2);
  font-size:0.82rem; font-weight:500;
  cursor:pointer;
  transition:background 0.15s, border-color 0.15s, color 0.15s;
}
.sidebar__leave:hover { background:rgba(248,113,113,0.08); border-color:rgba(248,113,113,0.25); color:#fca5a5; }

/* ════════════════════════════════════════════════════════════════
   MAIN
════════════════════════════════════════════════════════════════ */
.room-main {
  flex:            1;
  display:         flex;
  flex-direction:  column;
  align-items:     center;
  justify-content: center;
  gap:             20px;
  padding:         32px clamp(20px, 4vw, 72px);
  position:        relative;
  z-index:         1;
  overflow-y:      auto;
}

/* ── Avatar connector ───────────────────────────────────────── */
.avatars { display:flex; align-items:center; gap:16px; }

.avatar-wrap { display:flex; flex-direction:column; align-items:center; gap:6px; }
.avatar-name  { font-size:0.72rem; font-weight:500; color:var(--text-3); max-width:80px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

.avatar {
  width:54px; height:54px;
  border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  font-size:1.1rem; font-weight:700; color:#fff;
  border:2px solid rgba(255,255,255,0.1);
  position:relative; overflow:hidden;
  transition:box-shadow 0.4s, border-color 0.4s;
}
.avatar img { width:100%; height:100%; object-fit:cover; border-radius:50%; }

.avatar--me {
  background: var(--grad-sm);
  box-shadow: 0 0 0 2px rgba(255,110,180,0.35);
}
.avatar--me.avatar--playing { animation: avatar-pulse 2.2s ease-in-out infinite; }
@keyframes avatar-pulse {
  0%,100% { box-shadow:0 0 0 3px rgba(255,110,180,0.4), 0 0 20px rgba(255,110,180,0.3); }
  50%     { box-shadow:0 0 0 6px rgba(255,110,180,0.2), 0 0 36px rgba(255,110,180,0.5); }
}

.avatar--partner { background:linear-gradient(135deg, var(--purple), var(--cyan)); }
.avatar--offline  { background:rgba(255,255,255,0.05); color:var(--text-3); }
.avatar--ghost    { font-size:1.2rem; color:var(--text-3); }
.avatar__ring {
  position:absolute; inset:-4px;
  border-radius:50%;
  border:2px solid rgba(34,197,94,0.55);
  animation:ring-fade 2s ease-in-out infinite;
  overflow:visible;
}
@keyframes ring-fade { 0%,100% { opacity:0.8; transform:scale(1); } 50% { opacity:0; transform:scale(1.18); } }

/* Heartbeat connector */
.connector { display:flex; align-items:center; width:76px; flex-shrink:0; }
.connector__line { flex:1; height:2px; background:rgba(255,255,255,0.07); border-radius:99px; transition:background 0.4s; }
.connector--on .connector__line { background:linear-gradient(to right, rgba(255,110,180,0.5), rgba(168,85,247,0.5)); }
.connector__dot {
  width:10px; height:10px;
  border-radius:50%;
  background:rgba(255,255,255,0.12);
  flex-shrink:0;
  transition:background 0.4s, box-shadow 0.4s;
}
.connector--on .connector__dot { background:var(--grad-sm); box-shadow:0 0 12px rgba(168,85,247,0.7); }
.connector--beating .connector__dot { animation:heartbeat 1.5s ease-in-out infinite; }
@keyframes heartbeat {
  0%,100% { transform:scale(1); box-shadow:0 0 8px rgba(168,85,247,0.5); }
  28%     { transform:scale(1.4); box-shadow:0 0 20px rgba(255,110,180,0.8); }
  56%     { transform:scale(1.18); box-shadow:0 0 14px rgba(168,85,247,0.6); }
}

/* ════════════════════════════════════════════════════════════════
   PLAYER CARD
════════════════════════════════════════════════════════════════ */
.card {
  width:           min(540px, 94vw);
  background:      var(--bg-card);
  backdrop-filter: blur(48px);
  -webkit-backdrop-filter: blur(48px);
  border:          1px solid var(--border);
  border-radius:   22px;
  padding:         24px;
  display:         flex;
  flex-direction:  column;
  gap:             18px;
  box-shadow:
    0 48px 96px rgba(0,0,0,0.7),
    0 0 0 1px rgba(255,255,255,0.04) inset,
    0 0 64px rgba(168,85,247,0.1);
  position:        relative;
  overflow:        hidden;
  transition:      box-shadow 0.5s, border-color 0.5s;
}

/* Top shimmer line */
.card::before {
  content:''; position:absolute; top:0; left:0; right:0; height:1px;
  background:linear-gradient(to right, transparent 10%, rgba(255,255,255,0.12) 50%, transparent 90%);
  pointer-events:none;
}

.card--playing {
  border-color:rgba(255,110,180,0.18);
  box-shadow:0 48px 96px rgba(0,0,0,0.7), 0 0 0 1px rgba(255,255,255,0.06) inset, 0 0 80px rgba(255,110,180,0.15);
}
.card--synced { animation:card-flash 3s ease-out; }
@keyframes card-flash {
  0%  { border-color:rgba(255,255,255,0.07); }
  15% { border-color:rgba(168,85,247,0.7); box-shadow:0 48px 96px rgba(0,0,0,0.7), 0 0 120px rgba(168,85,247,0.45); }
  100%{ border-color:rgba(255,110,180,0.18); }
}

/* Top strip — art + meta side by side */
.card__top {
  display: grid;
  grid-template-columns: 180px 1fr;
  gap:     20px;
  align-items: start;
}

@media (max-width: 520px) {
  .card__top { grid-template-columns: 1fr; }
}

/* Album art */
.card__art-wrap {
  width:         100%;
  aspect-ratio:  1;
  border-radius: 14px;
  overflow:      hidden;
  position:      relative;
  background:    linear-gradient(135deg, #1a0936, #0a1640);
  box-shadow:    0 16px 48px rgba(0,0,0,0.6);
  transition:    box-shadow 0.5s;
  flex-shrink:   0;
}
.card__art-wrap--playing {
  box-shadow:0 20px 56px rgba(168,85,247,0.4), 0 16px 48px rgba(0,0,0,0.6);
}
.card__art { width:100%; height:100%; object-fit:cover; display:block; transition:transform 1s ease; }
.card__art-wrap--playing .card__art { transform:scale(1.025); }
.card__art-placeholder { width:100%; height:100%; display:flex; align-items:center; justify-content:center; }
.card__art-shine {
  position:absolute; inset:0;
  background:radial-gradient(ellipse at 25% 20%, rgba(255,110,180,0.18) 0%, transparent 55%);
  pointer-events:none;
  animation:shine-pulse 3s ease-in-out infinite alternate;
}
@keyframes shine-pulse { 0% { opacity:0.6; } 100% { opacity:1; } }

/* Meta (right of art) */
.card__meta { display:flex; flex-direction:column; gap:10px; min-width:0; padding-top:4px; }

.card__badges { display:flex; gap:6px; flex-wrap:wrap; }
.card__badge {
  display:inline-flex; align-items:center; gap:3px;
  padding:3px 9px;
  border-radius:100px;
  font-size:0.68rem; font-weight:700; letter-spacing:0.03em;
  background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.08); color:var(--text-3);
  transition:all 0.4s;
}
.card__badge--synced { background:rgba(255,110,180,0.12); border-color:rgba(255,110,180,0.3); color:#ffb3d9; }
.card__badge--ready  { background:rgba(34,197,94,0.1);   border-color:rgba(34,197,94,0.28);  color:#86efac; }
.card__badge--good   { background:rgba(34,197,94,0.1);   border-color:rgba(34,197,94,0.28);  color:#86efac; }
.card__badge--ok     { background:rgba(250,204,21,0.1);  border-color:rgba(250,204,21,0.28); color:#fde68a; }
.card__badge--slow   { background:rgba(239,68,68,0.1);   border-color:rgba(239,68,68,0.28);  color:#fca5a5; }
.card__badge--lat    { font-family:ui-monospace,monospace; }

.card__track {
  font-size:     1.35rem;
  font-weight:   800;
  letter-spacing:-0.02em;
  line-height:   1.2;
  color:         var(--text);
  overflow:      hidden;
  display:       -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
.card__artist { font-size:0.82rem; color:var(--text-3); }

/* Waveform */
.card__waveform {
  display:       flex;
  align-items:   center;
  gap:           2px;
  height:        32px;
  overflow:      hidden;
  margin-top:    4px;
}
.card__bar {
  width:3px; min-height:3px;
  border-radius:100px;
  background:rgba(255,255,255,0.1);
  transition:height 0.4s ease, background 0.4s ease;
  flex-shrink:0;
}
.card__bar--playing {
  background:linear-gradient(to top, var(--purple), var(--pink));
  animation:bar-dance 0.8s ease-in-out infinite alternate;
}
@keyframes bar-dance { 0% { transform:scaleY(0.35); opacity:0.6; } 100% { transform:scaleY(1); opacity:1; } }

/* Progress */
.card__progress-section { display:flex; flex-direction:column; gap:6px; }
.card__progress {
  width:100%; height:4px;
  border-radius:100px;
  background:rgba(255,255,255,0.08);
  position:relative; overflow:visible; cursor:pointer;
}
.card__progress-fill {
  height:100%; border-radius:100px;
  background:var(--grad);
  position:relative;
  box-shadow:0 0 12px rgba(168,85,247,0.5);
  transition:width 0.5s linear;
}
.card__progress-thumb {
  position:absolute; right:-5px; top:50%;
  transform:translateY(-50%);
  width:13px; height:13px;
  border-radius:50%;
  background:#fff;
  box-shadow:0 0 12px rgba(168,85,247,0.8);
  opacity:0; transition:opacity 0.15s;
}
.card__progress:hover .card__progress-thumb { opacity:1; }
.card__times {
  display:flex; justify-content:space-between;
  font-size:0.68rem; color:var(--text-3);
  font-family:ui-monospace,monospace;
  font-variant-numeric:tabular-nums;
}

/* Controls */
.card__controls { display:flex; align-items:center; justify-content:center; gap:20px; }

.card__ctrl-sm {
  width:42px; height:42px;
  border-radius:50%;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.08);
  color:var(--text-3);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
  transition:background 0.15s, color 0.15s, border-color 0.15s;
}
.card__ctrl-sm:hover:not(:disabled)  { background:rgba(255,255,255,0.1); color:var(--text-2); }
.card__ctrl-sm:disabled { opacity:0.3; cursor:default; }

.card__play {
  width:76px; height:76px;
  border-radius:50%; border:none;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; position:relative;
  transition:transform 0.2s var(--ease-spring), box-shadow 0.2s;
}
.card__play--play {
  background:var(--grad);
  box-shadow:0 0 40px rgba(168,85,247,0.55), 0 10px 30px rgba(0,0,0,0.45);
  color:#fff;
}
.card__play--pause {
  background:var(--grad-sm);
  box-shadow:0 0 40px rgba(255,110,180,0.55), 0 10px 30px rgba(0,0,0,0.45);
  color:#fff;
}
.card__play--synced { animation:play-pop 3s ease-out; }
@keyframes play-pop { 0% { transform:scale(1); } 14% { transform:scale(1.22); } 30% { transform:scale(0.95); } 44% { transform:scale(1.08); } 100% { transform:scale(1); } }
.card__play:hover:not(:disabled)  { transform:scale(1.09); }
.card__play:active:not(:disabled) { transform:scale(0.95); }
.card__play:disabled { opacity:0.4; cursor:default; }
.card__play-ring {
  position:absolute; inset:-10px;
  border-radius:50%;
  border:2px solid rgba(168,85,247,0.6);
  animation:ring-out 2.5s ease-out forwards;
  pointer-events:none;
}

/* Action row */
.card__actions {
  display:       flex;
  align-items:   center;
  gap:           8px;
  padding-top:   14px;
  border-top:    1px solid rgba(255,255,255,0.05);
  flex-wrap:     wrap;
}

.card__action-btn {
  display:       inline-flex;
  align-items:   center;
  gap:           6px;
  padding:       7px 13px;
  border-radius: 100px;
  background:    rgba(255,255,255,0.04);
  border:        1px solid rgba(255,255,255,0.08);
  color:         var(--text-3);
  font-size:     0.76rem;
  font-weight:   600;
  cursor:        pointer;
  transition:    background 0.15s, color 0.15s, border-color 0.15s;
}
.card__action-btn:hover { background:rgba(168,85,247,0.1); color:var(--text-2); border-color:rgba(168,85,247,0.28); }
.card__action-btn--active { background:rgba(168,85,247,0.14); color:#c4b5fd; border-color:rgba(168,85,247,0.35); }

/* Volume */
.card__volume {
  display:     flex;
  align-items: center;
  gap:         7px;
  color:       var(--text-3);
}
.card__volume-slider {
  width:        72px; height:3px;
  accent-color: var(--purple);
  cursor:       pointer;
  border-radius:100px;
}

/* Emoji reactions */
.card__emoji-row { display:flex; align-items:center; gap:4px; margin-left:auto; }
.card__emoji {
  width:32px; height:32px;
  border-radius:50%;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.07);
  font-size:0.95rem;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
  transition:transform 0.12s var(--ease-spring), background 0.15s;
}
.card__emoji:hover  { transform:scale(1.3); background:rgba(255,255,255,0.1); }
.card__emoji:active { transform:scale(0.88); }

/* ════════════════════════════════════════════════════════════════
   BOTTOM BAR
════════════════════════════════════════════════════════════════ */
.bar {
  position:        fixed;
  bottom:          0; left:0; right:0;
  height:          72px;
  z-index:         100;
  display:         flex;
  align-items:     center;
  justify-content: space-between;
  padding:         0 24px;
  background:      rgba(5,3,13,0.95);
  backdrop-filter: blur(32px);
  -webkit-backdrop-filter: blur(32px);
  border-top:      1px solid var(--border);
}

.bar__left  { display:flex; align-items:center; gap:12px; min-width:160px; }
.bar__center{ display:flex; align-items:center; gap:14px; }
.bar__right { display:flex; align-items:center; gap:10px; min-width:160px; justify-content:flex-end; }

.bar__art { width:40px; height:40px; border-radius:6px; object-fit:cover; flex-shrink:0; box-shadow:0 0 14px rgba(168,85,247,0.35); }
.bar__art-placeholder { width:40px; height:40px; border-radius:6px; background:linear-gradient(135deg, #1a0936, #0a1640); display:flex; align-items:center; justify-content:center; flex-shrink:0; color:var(--text-3); }
.bar__track  { font-size:0.84rem; font-weight:600; color:var(--text); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:150px; line-height:1.3; }
.bar__artist { font-size:0.68rem; color:var(--text-3); margin-top:1px; }

.bar__ctrl {
  width:34px; height:34px; border-radius:50%;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.08);
  color:var(--text-3);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
  transition:background 0.15s, color 0.15s;
}
.bar__ctrl:disabled { opacity:0.3; cursor:default; }
.bar__ctrl:hover:not(:disabled) { background:rgba(255,255,255,0.09); color:var(--text-2); }

.bar__ctrl--main {
  width:44px; height:44px;
  background:var(--grad-sm);
  border:none; color:#fff;
  box-shadow:0 0 18px rgba(168,85,247,0.45);
  transition:transform 0.15s var(--ease-spring), box-shadow 0.15s;
}
.bar__ctrl--main:hover:not(:disabled) { transform:scale(1.08); }
.bar__ctrl--playing { background:linear-gradient(135deg, var(--pink), var(--purple)); }

.bar__icon-btn {
  width:32px; height:32px; border-radius:8px;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.07);
  color:var(--text-3);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
  transition:background 0.15s, color 0.15s;
}
.bar__icon-btn:hover { background:rgba(255,255,255,0.09); color:var(--text-2); }
.bar__icon-btn--active { background:rgba(168,85,247,0.12); color:#c4b5fd; border-color:rgba(168,85,247,0.28); }

.bar__together { font-size:0.7rem; color:var(--purple); font-family:ui-monospace,monospace; opacity:0.8; }

.bar__status {
  display:inline-flex; align-items:center; gap:6px;
  padding:4px 12px; border-radius:100px;
  font-size:0.68rem; font-weight:700; letter-spacing:0.04em;
  background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.07); color:var(--text-3);
  transition:all 0.4s;
}
.bar__status--live { background:rgba(255,110,180,0.1); border-color:rgba(255,110,180,0.28); color:#ffb3d9; }
.bar__status-dot { width:5px; height:5px; border-radius:50%; background:currentColor; animation:pulse-dot 2s ease-in-out infinite; flex-shrink:0; }

/* ════════════════════════════════════════════════════════════════
   SESSION SUMMARY
════════════════════════════════════════════════════════════════ */
.summary-overlay {
  position:        fixed; inset:0; z-index:400;
  display:         flex; align-items:center; justify-content:center;
  padding:         16px;
  background:      rgba(5,3,13,0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  animation:       fade-in 0.25s ease forwards;
}
@keyframes fade-in { from { opacity:0; } to { opacity:1; } }

.summary {
  width:100%; max-width:400px;
  background:rgba(10,6,24,0.96);
  backdrop-filter:blur(48px);
  -webkit-backdrop-filter:blur(48px);
  border:1px solid rgba(255,255,255,0.1);
  border-radius:22px;
  padding:28px;
  text-align:center;
  box-shadow:0 48px 96px rgba(0,0,0,0.8), 0 0 64px rgba(168,85,247,0.14);
  animation:summary-in 0.35s var(--ease-spring) forwards;
}
@keyframes summary-in {
  from { opacity:0; transform:translateY(20px) scale(0.96); }
  to   { opacity:1; transform:translateY(0) scale(1); }
}

.summary__icon  { font-size:2.6rem; margin-bottom:10px; }
.summary__title { font-size:1.7rem; font-weight:800; letter-spacing:-0.03em; color:var(--text); margin:0 0 6px; }
.summary__sub   { font-size:0.82rem; color:var(--text-3); margin:0 0 24px; }

.summary__stats {
  display:grid; grid-template-columns:repeat(3,1fr);
  gap:12px; margin-bottom:20px;
  padding:18px 0;
  border-top:1px solid rgba(255,255,255,0.06);
  border-bottom:1px solid rgba(255,255,255,0.06);
}
.summary__stat  { display:flex; flex-direction:column; gap:4px; align-items:center; }
.summary__val {
  font-size:2rem; font-weight:800; line-height:1;
  background:var(--grad);
  -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
  font-family:ui-monospace,monospace;
}
.summary__label { font-size:0.64rem; font-weight:700; color:var(--text-3); letter-spacing:0.08em; text-transform:uppercase; }

.summary__msg { font-size:0.88rem; color:var(--text-2); line-height:1.65; font-style:italic; margin:0 0 24px; }

.summary__actions { display:flex; flex-direction:column; gap:8px; }

.summary__btn {
  width:100%; padding:13px;
  border-radius:12px;
  font-size:0.9rem; font-weight:700;
  cursor:pointer;
  transition:opacity 0.15s, transform 0.15s;
}
.summary__btn:hover  { opacity:0.88; transform:translateY(-1px); }
.summary__btn:active { transform:translateY(0); }

.summary__btn--leave {
  background:var(--grad);
  border:none; color:#fff;
  box-shadow:0 4px 20px rgba(168,85,247,0.4);
}
.summary__btn--stay {
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.1);
  color:var(--text-2);
}

/* ════════════════════════════════════════════════════════════════
   MOBILE
════════════════════════════════════════════════════════════════ */
@media (max-width: 768px) {
  .room { flex-direction:column; padding-top:58px; }

  .sidebar {
    width:100%;
    flex-direction:row;
    align-items:center;
    justify-content:space-between;
    padding:10px 16px;
    border-right:none;
    border-bottom:1px solid var(--border);
  }
  .sidebar__top    { flex-direction:row; align-items:center; gap:10px; }
  .sidebar__bottom { padding-top:0; border-top:none; flex-direction:row; }
  /* Hide most sidebar blocks on mobile */
  .sidebar__section,
  .sidebar__search-cta { display:none; }

  .room-main { padding:16px; justify-content:flex-start; padding-top:24px; gap:16px; }
  .card { padding:18px; gap:14px; }
  .card__top { grid-template-columns:140px 1fr; gap:14px; }
  .card__actions { gap:6px; }
  .card__emoji-row { margin-left:0; }
  .card__volume { display:none; }

  .bar { padding:0 16px; }
  .bar__left  { min-width:unset; max-width:38%; }
  .bar__right { min-width:unset; }
  .bar__together { display:none; }

  .avatars { gap:10px; }
  .avatar  { width:44px; height:44px; font-size:0.9rem; }
  .connector { width:56px; }

  .room__reactions-stage { right:16px; }
}

@media (max-width: 420px) {
  .card__top { grid-template-columns:1fr; }
  .card__art-wrap { max-height:200px; }
}