/* ============================================================
   ROOM — Full-Featured Styles
   Mobile-first · Sync celebration · Mood aura · All features
   ============================================================ */


/* ── Shell ─────────────────────────────────────────────────── */

.room-shell {
  display:        flex;
  min-height:     100vh;
  padding-top:    72px;
  padding-bottom: 72px;
  background:     var(--bg-deep);
  color:          var(--text-primary);
  position:       relative;
  overflow:       hidden;
  transition:     background 1s ease;
}


/* ── Mood Aura System ──────────────────────────────────────── */

.room-shell.aura-romantic .room-orb--purple {
  background: radial-gradient(ellipse, rgba(255, 110, 180, 0.22) 0%, transparent 65%);
}
.room-shell.aura-energy .room-orb--purple {
  background: radial-gradient(ellipse, rgba(251, 146, 60, 0.18) 0%, transparent 65%);
}
.room-shell.aura-energy .room-orb--rose {
  background: radial-gradient(ellipse, rgba(239, 68, 68, 0.12) 0%, transparent 65%);
}


/* ── Background Orbs ───────────────────────────────────────── */

.room-orb {
  position:       fixed;
  border-radius:  50%;
  pointer-events: none;
  z-index:        0;
  transition:     background 1.5s ease;
}
.room-orb--purple {
  top: -15%; right: -10%;
  width: 650px; height: 650px;
  background: radial-gradient(ellipse, rgba(168, 85, 247, 0.14) 0%, transparent 65%);
  animation: orb-drift-b 16s ease-in-out infinite alternate;
}
.room-orb--rose {
  bottom: 0%; left: 15%;
  width: 500px; height: 400px;
  background: radial-gradient(ellipse, rgba(255, 110, 180, 0.09) 0%, transparent 65%);
  animation: orb-drift-a 12s ease-in-out infinite alternate-reverse;
}
.room-orb--celebrate {
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 800px; height: 800px;
  background: radial-gradient(ellipse, rgba(168, 85, 247, 0.25) 0%, rgba(255, 110, 180, 0.15) 40%, transparent 65%);
  animation: celebrate-glow 2.8s ease-out forwards;
}

@keyframes celebrate-glow {
  0%   { opacity: 0; transform: translate(-50%, -50%) scale(0.4); }
  30%  { opacity: 1; transform: translate(-50%, -50%) scale(1);   }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(1.3); }
}

/* Shell glow on sync */
.room-shell--celebrating {
  animation: shell-flash 2.8s ease-out forwards;
}
@keyframes shell-flash {
  0%,100% { filter: brightness(1); }
  20%     { filter: brightness(1.08); }
}


/* ── Blurred album art background (mobile atmosphere) ──────── */

.room-bg-art {
  position:         fixed;
  inset:            0;
  background-size:  cover;
  background-position: center;
  filter:           blur(80px) brightness(0.18) saturate(1.4);
  z-index:          0;
  pointer-events:   none;
  opacity:          0;
  transition:       opacity 1s ease;
}

@media (max-width: 768px) {
  .room-bg-art { opacity: 1; }
}


/* ── Reaction Stage ────────────────────────────────────────── */

.room-reactions-stage {
  position:       fixed;
  bottom:         90px;
  right:          var(--space-xl);
  z-index:        var(--z-overlay);
  pointer-events: none;
  display:        flex;
  flex-direction: column-reverse;
  gap:            8px;
  align-items:    flex-end;
}

.room-reaction {
  font-size:   2rem;
  line-height: 1;
  animation:   reaction-float 2.8s ease-out forwards;
  display:     block;
}
.room-reaction--partner { animation-name: reaction-float-partner; }

@keyframes reaction-float {
  0%   { opacity: 0; transform: translateY(0)   scale(0.4); }
  15%  { opacity: 1; transform: translateY(-10px) scale(1.2); }
  80%  { opacity: 1; transform: translateY(-80px) scale(1);   }
  100% { opacity: 0; transform: translateY(-120px) scale(0.8); }
}
@keyframes reaction-float-partner {
  0%   { opacity: 0; transform: translateX(-20px) scale(0.4); }
  15%  { opacity: 1; transform: translateX(0)     scale(1.2); }
  80%  { opacity: 1; transform: translateY(-60px) scale(1);   }
  100% { opacity: 0; transform: translateY(-100px) scale(0.8); }
}


/* ── Toast ─────────────────────────────────────────────────── */

.room-toast {
  position:      fixed;
  top:           calc(72px + 14px);
  left:          50%;
  transform:     translateX(-50%);
  z-index:       var(--z-overlay);
  display:       inline-flex;
  align-items:   center;
  gap:           8px;
  padding:       9px 20px;
  border-radius: var(--r-full);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  font-size:     0.84rem;
  font-weight:   600;
  white-space:   nowrap;
  animation:     fade-in 0.3s var(--ease-out) forwards;
}

.room-toast--info,
.room-toast--play   { background: rgba(168, 85, 247, 0.15); border: 1px solid rgba(168, 85, 247, 0.3); color: var(--grad-purple); }
.room-toast--pause  { background: rgba(255, 255, 255, 0.07); border: 1px solid rgba(255, 255, 255, 0.12); color: var(--text-secondary); }
.room-toast--sync   { background: rgba(255, 110, 180, 0.15); border: 1px solid rgba(255, 110, 180, 0.35); color: var(--grad-pink); }
.room-toast--join   { background: rgba(74, 222, 128, 0.1);  border: 1px solid rgba(74, 222, 128, 0.25); color: rgba(74, 222, 128, 0.9); }
.room-toast--leave  { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.08); color: var(--text-muted); }

.room-toast__dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: currentColor;
  animation: dot-pulse 1s ease-in-out infinite;
  flex-shrink: 0;
}


/* ── Sync Celebration ──────────────────────────────────────── */

.room-celebration {
  position:       fixed;
  inset:          0;
  z-index:        calc(var(--z-overlay) - 1);
  display:        flex;
  align-items:    center;
  justify-content:center;
  pointer-events: none;
}

.room-celebration__ripple {
  position:       absolute;
  border-radius:  50%;
  border:         2px solid rgba(168, 85, 247, 0.5);
  animation:      ripple-expand 2.8s ease-out forwards;
}
.room-celebration__ripple--1 { width: 100px;  height: 100px;  animation-delay: 0s;    }
.room-celebration__ripple--2 { width: 200px;  height: 200px;  animation-delay: 0.2s;  }
.room-celebration__ripple--3 { width: 320px;  height: 320px;  animation-delay: 0.4s;  }

@keyframes ripple-expand {
  0%   { transform: scale(0.8); opacity: 0.8; }
  100% { transform: scale(2.5); opacity: 0;   }
}

.room-celebration__text {
  position:      relative;
  font-family:   var(--font-display);
  font-size:     2.2rem;
  font-weight:   700;
  letter-spacing:-0.02em;
  background:    var(--gradient-accent);
  -webkit-background-clip: text;
  background-clip:         text;
  -webkit-text-fill-color: transparent;
  animation:     celeb-text 2.8s ease-out forwards;
}
@keyframes celeb-text {
  0%   { opacity: 0; transform: translateY(12px) scale(0.9); }
  25%  { opacity: 1; transform: translateY(0)    scale(1.05); }
  75%  { opacity: 1; transform: translateY(-4px) scale(1);   }
  100% { opacity: 0; transform: translateY(-16px) scale(0.95); }
}


/* ══════════════════════════════════════════════════════════════
   SIDEBAR
══════════════════════════════════════════════════════════════ */

.room-sidebar {
  width:           230px;
  flex-shrink:     0;
  display:         flex;
  flex-direction:  column;
  justify-content: space-between;
  padding:         var(--space-lg) var(--space-md);
  border-right:    1px solid rgba(255, 255, 255, 0.05);
  background:      rgba(6, 4, 15, 0.4);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  z-index:         1;
}

.room-sidebar__top    { display: flex; flex-direction: column; gap: var(--space-xl); }
.room-sidebar__bottom { display: flex; flex-direction: column; gap: var(--space-md); padding-top: var(--space-lg); border-top: 1px solid rgba(255,255,255,0.05); }

.room-sidebar__brand {
  display:     flex;
  align-items: center;
  gap:         9px;
  text-decoration: none;
}
.room-sidebar__logo {
  width: 30px; height: 30px;
  object-fit: contain;
  filter: drop-shadow(0 0 6px rgba(168, 85, 247, 0.5));
  flex-shrink: 0;
}
.room-sidebar__brand-name {
  font-family:   var(--font-display);
  font-size:     1.1rem;
  font-weight:   700;
  background:    linear-gradient(to right, #fff 30%, var(--grad-purple));
  -webkit-background-clip: text;
  background-clip:         text;
  -webkit-text-fill-color: transparent;
}

.room-sidebar__block { display: flex; flex-direction: column; gap: 6px; }
.room-sidebar__label { font-size: 0.65rem; font-weight: 600; color: var(--text-muted); letter-spacing: 0.08em; text-transform: uppercase; }

.room-sidebar__code-row { display: flex; align-items: center; gap: 7px; }
.room-sidebar__code {
  font-family:   var(--font-mono);
  font-size:     0.9rem;
  font-weight:   700;
  color:         var(--text-primary);
  letter-spacing:0.15em;
  background:    rgba(168, 85, 247, 0.08);
  border:        1px solid rgba(168, 85, 247, 0.2);
  border-radius: var(--r-sm);
  padding:       4px 9px;
}
.room-sidebar__icon-btn {
  width: 26px; height: 26px;
  border-radius: var(--r-xs);
  background: transparent;
  border: 1px solid var(--glass-border);
  color: var(--text-muted);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; flex-shrink: 0;
  transition: color var(--duration-fast) ease, background var(--duration-fast) ease, border-color var(--duration-fast) ease;
}
.room-sidebar__icon-btn:hover { color: var(--text-primary); background: rgba(168,85,247,0.1); border-color: rgba(168,85,247,0.3); }

/* Partner row */
.room-sidebar__partner-row { display: flex; align-items: center; gap: 10px; }
.room-sidebar__avatar {
  width: 38px; height: 38px;
  border-radius: 50%;
  background: rgba(255,255,255,0.06);
  border: 2px solid rgba(255,255,255,0.1);
  display: flex; align-items: center; justify-content: center;
  font-size: 0.9rem; font-weight: 700;
  flex-shrink: 0;
  position: relative;
  overflow: visible;
  transition: border-color var(--duration-slow) ease;
}
.room-sidebar__avatar--on { border-color: rgba(74,222,128,0.5); }
.room-sidebar__avatar-img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
.room-sidebar__avatar-dot {
  position: absolute; bottom: 0; right: 0;
  width: 9px; height: 9px;
  border-radius: 50%;
  background: var(--text-muted);
  border: 2px solid var(--bg-deep);
}
.room-sidebar__avatar-dot--on {
  background: rgba(74,222,128,0.9);
  box-shadow: 0 0 6px rgba(74,222,128,0.6);
  animation: dot-pulse 2s ease-in-out infinite;
}
.room-sidebar__partner-name   { font-size: 0.85rem; font-weight: 600; color: var(--text-primary); line-height: 1.2; }
.room-sidebar__partner-status { font-size: 0.7rem; color: var(--text-muted); }

/* Timer */
.room-sidebar__timer {
  font-family:   var(--font-mono);
  font-size:     1.1rem;
  font-weight:   700;
  background:    var(--gradient-accent);
  -webkit-background-clip: text;
  background-clip:         text;
  -webkit-text-fill-color: transparent;
}

/* Connection */
.room-sidebar__conn { display: flex; align-items: center; gap: 7px; font-size: 0.75rem; color: var(--text-muted); }
.room-sidebar__conn-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--text-muted); flex-shrink: 0; }
.room-sidebar__conn-dot--live { background: rgba(74,222,128,0.9); box-shadow: 0 0 6px rgba(74,222,128,0.5); animation: dot-pulse 2.5s ease-in-out infinite; }
.room-sidebar__conn-label { flex: 1; font-weight: 500; }
.room-sidebar__latency { font-family: var(--font-mono); font-size: 0.65rem; color: rgba(74,222,128,0.7); margin-left: auto; }

.room-sidebar__leave {
  display: flex; align-items: center; gap: 7px;
  padding: 9px 12px;
  border-radius: var(--r-md);
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.07);
  color: var(--text-secondary);
  font-family: var(--font-body);
  font-size: 0.84rem; font-weight: 500;
  cursor: pointer;
  transition: background var(--duration-fast) ease, border-color var(--duration-fast) ease, color var(--duration-fast) ease;
}
.room-sidebar__leave:hover { background: rgba(248,113,113,0.08); border-color: rgba(248,113,113,0.25); color: rgba(248,113,113,0.9); }


/* ══════════════════════════════════════════════════════════════
   MAIN
══════════════════════════════════════════════════════════════ */

.room-main {
  flex:            1;
  display:         flex;
  flex-direction:  column;
  align-items:     center;
  justify-content: center;
  gap:             var(--space-lg);
  padding:         var(--space-xl) clamp(var(--space-lg), 4vw, 80px);
  position:        relative;
  z-index:         1;
  overflow-y:      auto;
}


/* ── Avatar Pair ───────────────────────────────────────────── */

.room-avatars {
  display:     flex;
  align-items: center;
  gap:         var(--space-md);
}

.room-avatar-wrap { display: flex; flex-direction: column; align-items: center; gap: 6px; }
.room-avatar-name { font-size: 0.75rem; font-weight: 500; color: var(--text-muted); text-align: center; max-width: 80px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.room-avatar {
  width:         56px;
  height:        56px;
  border-radius: 50%;
  display:       flex;
  align-items:   center;
  justify-content: center;
  font-size:     1.1rem;
  font-weight:   700;
  color:         #fff;
  border:        2px solid rgba(255,255,255,0.1);
  position:      relative;
  overflow:      hidden;
  transition:    box-shadow var(--duration-slow) ease, border-color var(--duration-slow) ease;
}
.room-avatar img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

.room-avatar--me {
  background: linear-gradient(135deg, var(--grad-pink), var(--grad-purple));
  box-shadow: 0 0 0 2px rgba(255,110,180,0.3);
}
.room-avatar--me.room-avatar--playing {
  box-shadow: 0 0 0 3px var(--grad-pink), 0 0 24px rgba(255,110,180,0.45);
  animation:  avatar-pulse 2s ease-in-out infinite;
}
@keyframes avatar-pulse {
  0%,100% { box-shadow: 0 0 0 3px var(--grad-pink), 0 0 20px rgba(255,110,180,0.4); }
  50%     { box-shadow: 0 0 0 5px rgba(255,110,180,0.4), 0 0 36px rgba(255,110,180,0.6); }
}

.room-avatar--online {
  background: linear-gradient(135deg, var(--grad-purple), var(--grad-blue));
  box-shadow: 0 0 0 2px rgba(168,85,247,0.3);
}
.room-avatar--offline { background: rgba(255,255,255,0.06); color: var(--text-muted); }
.room-avatar--waiting-icon { font-size: 1.2rem; color: var(--text-muted); }
.room-avatar__online-ring {
  position:      absolute;
  inset:         -4px;
  border-radius: 50%;
  border:        2px solid rgba(74,222,128,0.6);
  animation:     ring-pulse 2s ease-in-out infinite;
  pointer-events:none;
}
@keyframes ring-pulse {
  0%,100% { opacity: 0.7; transform: scale(1);   }
  50%     { opacity: 0;   transform: scale(1.15); }
}


/* ── Heartbeat Connector ───────────────────────────────────── */

.room-connector {
  display:     flex;
  align-items: center;
  gap:         0;
  width:       80px;
  flex-shrink: 0;
  position:    relative;
}

.room-connector__line {
  flex:          1;
  height:        2px;
  background:    rgba(255,255,255,0.08);
  border-radius: var(--r-full);
  transition:    background var(--duration-slow) ease;
}

.room-connector--on .room-connector__line {
  background: linear-gradient(to right, rgba(255,110,180,0.5), rgba(168,85,247,0.5));
}

.room-connector__pulse {
  width:         10px;
  height:        10px;
  border-radius: 50%;
  background:    rgba(255,255,255,0.15);
  flex-shrink:   0;
  transition:    background var(--duration-slow) ease, box-shadow var(--duration-slow) ease;
}

.room-connector--on .room-connector__pulse {
  background: linear-gradient(135deg, var(--grad-pink), var(--grad-purple));
  box-shadow: 0 0 10px rgba(168,85,247,0.6);
}

.room-connector--beating .room-connector__pulse {
  animation: heartbeat-pulse 1.4s ease-in-out infinite;
}
@keyframes heartbeat-pulse {
  0%,100% { transform: scale(1);    box-shadow: 0 0 8px rgba(168,85,247,0.5);  }
  30%     { transform: scale(1.35); box-shadow: 0 0 18px rgba(255,110,180,0.7); }
  60%     { transform: scale(1.15); box-shadow: 0 0 12px rgba(168,85,247,0.6);  }
}


/* ── Player Card ───────────────────────────────────────────── */

.room-card {
  width:           min(520px, 92vw);
  background:      rgba(10, 7, 24, 0.78);
  backdrop-filter: blur(40px);
  -webkit-backdrop-filter: blur(40px);
  border:          1px solid rgba(255,255,255,0.08);
  border-radius:   var(--r-2xl);
  padding:         var(--space-xl);
  display:         flex;
  flex-direction:  column;
  gap:             var(--space-lg);
  box-shadow:
    0 40px 80px rgba(0,0,0,0.65),
    0 0 0 1px rgba(255,255,255,0.04) inset,
    0 0 60px rgba(168,85,247,0.12);
  position:        relative;
  overflow:        hidden;
  transition:      box-shadow var(--duration-slow) ease, border-color var(--duration-slow) ease;
}

.room-card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(to right, transparent, rgba(255,255,255,0.1), transparent);
  pointer-events: none;
}

.room-card--playing {
  border-color: rgba(255,110,180,0.18);
  box-shadow: 0 40px 80px rgba(0,0,0,0.65), 0 0 0 1px rgba(255,255,255,0.06) inset, 0 0 80px rgba(255,110,180,0.18);
}

.room-card--synced {
  animation: card-sync-flash 2.8s ease-out;
}
@keyframes card-sync-flash {
  0%  { border-color: rgba(255,255,255,0.08); }
  15% { border-color: rgba(168,85,247,0.6); box-shadow: 0 40px 80px rgba(0,0,0,0.65), 0 0 120px rgba(168,85,247,0.4); }
  100%{ border-color: rgba(255,110,180,0.18); }
}


/* Album art */
.room-card__art-wrap {
  width:         100%;
  aspect-ratio:  1;
  max-height:    240px;
  border-radius: var(--r-xl);
  overflow:      hidden;
  position:      relative;
  background:    linear-gradient(135deg, #1a0a36, #0d1845);
  box-shadow:    0 12px 40px rgba(0,0,0,0.5);
  transition:    box-shadow var(--duration-slow) ease;
}

.room-card__art-wrap--playing {
  box-shadow: 0 16px 50px rgba(168,85,247,0.35), 0 12px 40px rgba(0,0,0,0.5);
}

.room-card__art {
  width: 100%; height: 100%;
  object-fit: cover;
  display: block;
  transition: transform 0.8s ease;
}
.room-card__art-wrap--playing .room-card__art {
  transform: scale(1.02);
}

.room-card__art-placeholder {
  width: 100%; height: 100%;
  display: flex; align-items: center; justify-content: center;
}

.room-card__art-glow {
  position: absolute; inset: 0;
  background: radial-gradient(ellipse at 30% 30%, rgba(255,110,180,0.15) 0%, transparent 60%);
  pointer-events: none;
}


/* Track info */
.room-card__info { display: flex; flex-direction: column; gap: 4px; }
.room-card__track {
  font-family:   var(--font-display);
  font-size:     1.4rem;
  font-weight:   700;
  letter-spacing:-0.01em;
  line-height:   1.2;
  color:         var(--text-primary);
  white-space:   nowrap;
  overflow:      hidden;
  text-overflow: ellipsis;
}
.room-card__artist { font-size: 0.88rem; color: var(--text-muted); margin-bottom: 4px; }

/* Badges */
.room-card__badges { display: flex; gap: 7px; flex-wrap: wrap; }
.room-card__badge {
  display: inline-flex; align-items: center; gap: 4px;
  padding: 3px 10px;
  border-radius: var(--r-full);
  font-size: 0.72rem; font-weight: 600; letter-spacing: 0.02em;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.08);
  color: var(--text-muted);
  transition: all var(--duration-slow) ease;
}
.room-card__badge--synced  { background: rgba(255,110,180,0.1);  border-color: rgba(255,110,180,0.28); color: var(--grad-pink); }
.room-card__badge--ready   { background: rgba(74,222,128,0.08); border-color: rgba(74,222,128,0.22);  color: rgba(74,222,128,0.85); }
.room-card__badge--good    { background: rgba(74,222,128,0.08); border-color: rgba(74,222,128,0.22);  color: rgba(74,222,128,0.85); }
.room-card__badge--ok      { background: rgba(251,191,36,0.08); border-color: rgba(251,191,36,0.22);  color: rgba(251,191,36,0.85); }
.room-card__badge--slow    { background: rgba(239,68,68,0.08);  border-color: rgba(239,68,68,0.22);   color: rgba(239,68,68,0.85); }
.room-card__badge--latency { font-family: var(--font-mono); }


/* Waveform */
.room-card__waveform {
  display: flex; align-items: center; gap: 2.5px;
  height: 38px;
  overflow: hidden;
}
.room-card__bar {
  width: 3px; min-height: 4px;
  border-radius: var(--r-full);
  background: rgba(255,255,255,0.1);
  transition: height 0.4s var(--ease-out), background 0.4s ease;
  flex-shrink: 0;
}
.room-card__bar--playing {
  background: linear-gradient(to top, var(--grad-purple), var(--grad-pink));
  animation: bar-wave 0.9s ease-in-out infinite alternate;
}
@keyframes bar-wave {
  0%   { transform: scaleY(0.4); opacity: 0.5; }
  100% { transform: scaleY(1);   opacity: 1;   }
}


/* Progress */
.room-card__progress-section { display: flex; flex-direction: column; gap: 6px; }
.room-card__progress-track {
  width: 100%; height: 4px;
  border-radius: var(--r-full);
  background: rgba(255,255,255,0.08);
  position: relative; overflow: visible;
  cursor: pointer;
}
.room-card__progress-fill {
  height: 100%;
  border-radius: var(--r-full);
  background: var(--gradient-accent);
  position: relative;
  box-shadow: 0 0 10px rgba(168,85,247,0.4);
  transition: width 0.5s linear;
}
.room-card__progress-thumb {
  position: absolute; right: -5px; top: 50%;
  transform: translateY(-50%);
  width: 12px; height: 12px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 0 10px rgba(168,85,247,0.7);
  opacity: 0;
  transition: opacity var(--duration-fast) ease;
}
.room-card__progress-track:hover .room-card__progress-thumb { opacity: 1; }
.room-card__times {
  display: flex; justify-content: space-between;
  font-family: var(--font-mono);
  font-size: 0.72rem;
  color: var(--text-muted);
}


/* Controls */
.room-card__controls { display: flex; align-items: center; justify-content: center; gap: var(--space-lg); }

.room-card__ctrl-sm {
  width: 40px; height: 40px;
  border-radius: 50%;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.08);
  color: var(--text-muted);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  transition: background var(--duration-fast) ease;
}
.room-card__ctrl-sm:disabled { opacity: 0.35; cursor: not-allowed; }

.room-card__play-btn {
  width: 72px; height: 72px;
  border-radius: 50%;
  border: none;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  position: relative;
  transition: transform var(--duration-base) var(--ease-out), box-shadow var(--duration-base) ease;
}
.room-card__play-btn--play {
  background: linear-gradient(135deg, var(--grad-pink), var(--grad-purple), var(--grad-blue));
  box-shadow: 0 0 32px rgba(168,85,247,0.5), 0 8px 24px rgba(0,0,0,0.4);
  color: #fff;
}
.room-card__play-btn--pause {
  background: linear-gradient(135deg, var(--grad-purple), var(--grad-pink));
  box-shadow: 0 0 32px rgba(255,110,180,0.5), 0 8px 24px rgba(0,0,0,0.4);
  color: #fff;
}
.room-card__play-btn--synced {
  animation: play-btn-expand 2.8s ease-out;
}
@keyframes play-btn-expand {
  0%   { transform: scale(1); }
  15%  { transform: scale(1.18); }
  35%  { transform: scale(0.97); }
  50%  { transform: scale(1.06); }
  100% { transform: scale(1); }
}
.room-card__play-btn:hover:not(:disabled) { transform: scale(1.08); box-shadow: 0 0 48px rgba(168,85,247,0.7), 0 12px 32px rgba(0,0,0,0.5); }
.room-card__play-btn:active:not(:disabled) { transform: scale(0.96); }
.room-card__play-btn:disabled { opacity: 0.45; cursor: not-allowed; }

.room-card__play-btn-ring {
  position: absolute; inset: -8px;
  border-radius: 50%;
  border: 2px solid rgba(168,85,247,0.6);
  animation: ripple-expand 2s ease-out forwards;
  pointer-events: none;
}


/* Reactions */
.room-card__reactions {
  display: flex; align-items: center; justify-content: center;
  gap: var(--space-sm);
  padding-top: var(--space-sm);
  border-top: 1px solid rgba(255,255,255,0.05);
}
.room-card__reaction-btn {
  width: 38px; height: 38px;
  border-radius: 50%;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.07);
  font-size: 1.1rem;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  transition: transform var(--duration-fast) var(--ease-out), background var(--duration-fast) ease;
}
.room-card__reaction-btn:hover {
  transform: scale(1.25);
  background: rgba(255,255,255,0.1);
}
.room-card__reaction-btn:active { transform: scale(0.9); }


/* ══════════════════════════════════════════════════════════════
   BOTTOM BAR
══════════════════════════════════════════════════════════════ */

.room-bar {
  position: fixed; bottom: 0; left: 0; right: 0;
  height: 72px; z-index: var(--z-nav);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 var(--space-xl);
  background: rgba(6,4,15,0.92);
  backdrop-filter: blur(28px);
  -webkit-backdrop-filter: blur(28px);
  border-top: 1px solid rgba(255,255,255,0.07);
}

.room-bar__left   { display: flex; align-items: center; gap: 12px; min-width: 180px; }
.room-bar__center { display: flex; align-items: center; gap: 14px; }
.room-bar__right  { display: flex; align-items: center; gap: 12px; min-width: 180px; justify-content: flex-end; }

.room-bar__art {
  width: 40px; height: 40px;
  border-radius: var(--r-sm);
  object-fit: cover;
  flex-shrink: 0;
  box-shadow: 0 0 12px rgba(168,85,247,0.3);
}
.room-bar__art-placeholder {
  width: 40px; height: 40px;
  border-radius: var(--r-sm);
  background: linear-gradient(135deg, #1a0a36, #0d1845);
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
  color: var(--text-muted);
}

.room-bar__track  { font-size: 0.875rem; font-weight: 600; color: var(--text-primary); line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 160px; }
.room-bar__artist { font-size: 0.72rem;  color: var(--text-muted); margin-top: 2px; }

.room-bar__ctrl {
  width: 36px; height: 36px; border-radius: 50%;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.08);
  color: var(--text-secondary);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
}
.room-bar__ctrl:disabled { opacity: 0.35; cursor: not-allowed; }
.room-bar__ctrl--main {
  width: 44px; height: 44px;
  background: linear-gradient(135deg, var(--grad-purple), var(--grad-pink));
  border: none; color: #fff;
  box-shadow: 0 0 16px rgba(168,85,247,0.4);
  transition: transform var(--duration-fast) var(--ease-out), box-shadow var(--duration-fast) ease;
}
.room-bar__ctrl--main:hover:not(:disabled) { transform: scale(1.08); }
.room-bar__ctrl--playing { background: linear-gradient(135deg, var(--grad-pink), var(--grad-purple)); }

.room-bar__together {
  font-family: var(--font-mono); font-size: 0.7rem;
  color: var(--grad-purple); opacity: 0.8;
}

.room-bar__status {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 4px 12px; border-radius: var(--r-full);
  font-size: 0.72rem; font-weight: 600; letter-spacing: 0.04em;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  color: var(--text-muted);
  transition: all var(--duration-slow) ease;
}
.room-bar__status--live { background: rgba(255,110,180,0.1); border-color: rgba(255,110,180,0.25); color: var(--grad-pink); }
.room-bar__status-dot { width: 5px; height: 5px; border-radius: 50%; background: currentColor; animation: dot-pulse 1.8s ease-in-out infinite; flex-shrink: 0; }


/* ══════════════════════════════════════════════════════════════
   SESSION SUMMARY MODAL
══════════════════════════════════════════════════════════════ */

.room-summary-overlay {
  position: fixed; inset: 0; z-index: var(--z-modal);
  display: flex; align-items: center; justify-content: center;
  padding: var(--space-md);
  background: rgba(6,4,15,0.8);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  animation: fade-in 0.3s var(--ease-out) forwards;
}

.room-summary {
  width: 100%; max-width: 420px;
  background: rgba(10,7,24,0.92);
  backdrop-filter: blur(40px);
  -webkit-backdrop-filter: blur(40px);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: var(--r-xl);
  padding: var(--space-xl);
  text-align: center;
  box-shadow: 0 40px 80px rgba(0,0,0,0.7), 0 0 60px rgba(168,85,247,0.15);
  animation: scale-in 0.4s var(--ease-out) forwards;
}

.room-summary__icon  { font-size: 2.8rem; margin-bottom: var(--space-sm); }
.room-summary__title {
  font-family: var(--font-display); font-size: 1.8rem; font-weight: 700;
  letter-spacing: -0.02em; color: var(--text-primary); margin-bottom: 6px;
}
.room-summary__sub   { font-size: 0.875rem; color: var(--text-muted); margin-bottom: var(--space-xl); }

.room-summary__stats {
  display: grid; grid-template-columns: repeat(3, 1fr);
  gap: var(--space-md);
  margin-bottom: var(--space-xl);
  padding: var(--space-lg) 0;
  border-top: 1px solid rgba(255,255,255,0.06);
  border-bottom: 1px solid rgba(255,255,255,0.06);
}
.room-summary__stat  { display: flex; flex-direction: column; gap: 4px; }
.room-summary__stat-value {
  font-family: var(--font-display); font-size: 2rem; font-weight: 700;
  background: var(--gradient-accent);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  line-height: 1;
}
.room-summary__stat-label { font-size: 0.7rem; color: var(--text-muted); font-weight: 500; letter-spacing: 0.05em; text-transform: uppercase; }

.room-summary__message {
  font-size: 0.9rem; color: var(--text-secondary); line-height: 1.65;
  margin-bottom: var(--space-xl); font-style: italic;
}

.room-summary__actions { display: flex; flex-direction: column; gap: var(--space-sm); }
.room-summary__confirm { width: 100%; justify-content: center; padding: 13px; }
.room-summary__cancel  { width: 100%; justify-content: center; padding: 10px; border-radius: var(--r-md); }


/* ══════════════════════════════════════════════════════════════
   MOBILE — Full-screen album art mode
══════════════════════════════════════════════════════════════ */

@media (max-width: 768px) {
  .room-shell {
    flex-direction: column;
    padding-top:    62px;
  }

  .room-sidebar {
    width: 100%;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    padding: 10px var(--space-md);
    border-right: none;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    gap: 0;
  }
  .room-sidebar__top    { flex-direction: row; align-items: center; gap: var(--space-md); }
  .room-sidebar__bottom { padding-top: 0; border-top: none; flex-direction: row; }
  .room-sidebar__block:not(:first-child) { display: none; }

  .room-main {
    padding: var(--space-md);
    justify-content: flex-start;
    padding-top: var(--space-xl);
  }

  .room-card { padding: var(--space-md); }
  .room-card__art-wrap { max-height: 200px; }

  .room-bar { padding: 0 var(--space-md); }
  .room-bar__left  { min-width: unset; max-width: 40%; }
  .room-bar__right { min-width: unset; }
  .room-bar__together { display: none; }

  .room-reactions-stage { right: var(--space-md); }

  .room-connector { width: 52px; }
  .room-avatar    { width: 46px; height: 46px; font-size: 0.9rem; }
}